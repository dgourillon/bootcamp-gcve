


./00-variables.sh

gcloud vmware networks create $VEN_NAME --type STANDARD --project=$PROJECT_ID --location=global

gcloud vmware network-peerings create peering-vpc \
    --project=$PROJECT_ID \
    --peer-network=$GCVE_NETWORK_NAME \
    --peer-network-type="STANDARD" \
    --vmware-engine-network=$VEN_NAME 

PSA_PROJECT_ID=$(gcloud compute networks peerings list --format=json --filter="name=gcve-network" | grep -o 'projects/.*/servicenetworking' | awk -F '/' '{print $2}')

gcloud vmware network-peerings create peering-psa \
    --project=$PROJECT_ID \
    --peer-network="servicenetworking" \
    --peer-project=$PSA_PROJECT_ID \
    --peer-network-type="PRIVATE_SERVICES_ACCESS" \
    --vmware-engine-network=$VEN_NAME 

 gcloud vmware private-clouds create $PC1_NAME \
    --location=$PC1_LOCATION-a \
    --project=$PROJECT_ID \
    --type=TIME_LIMITED \
    --cluster=my-management-cluster \
    --node-type-config=type=standard-72,count=1 \
    --management-range=$PC1_ADMIN_RANGE \
    --vmware-engine-network=$VEN_NAME

 gcloud vmware private-clouds create $PC2_NAME \
    --location=$PC2_LOCATION-a \
    --project=$PROJECT_ID \
    --type=TIME_LIMITED \
    --cluster=my-management-cluster \
    --node-type-config=type=standard-72,count=1 \
    --management-range=$PC2_ADMIN_RANGE \
    --vmware-engine-network=$VEN_NAME